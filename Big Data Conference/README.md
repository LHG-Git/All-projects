<div align="center">
  <h1>🥈 2022 서울시 빅데이터 컨퍼런스<br><br>
  🚆 지하철 9호선 신설역 수요인원 예측 모델 개발 및 정책 제안</h1>
</div>

![image](https://github.com/heegu0513/project/assets/100845169/27f695b8-ce1f-45e6-9f98-5202ee579452)<br>
지하철이라는 주제 특성상 많은 사람들이 흔하게 접할 수 있다는 점, 특히 출퇴근 시간에 지하철 내부의 혼잡률은 겉잡을 수 없이 심하기 때문에, 압사사고, 안전사고 등이 쉽게 일어날 수 있다는 점(당시 정말 안타깝게 발생한 이태원 참사사건으로, 혼잡률 그리고 밀집률에 대한 분석 주제가 아무래도 조금 더 관심을 받지 않았나라는 생각이 들었습니다.), 9호선의 경우 개통후 현재까지도 부정적인 여론이 형성되는 호선으로 주목받고 있는 와중에, 새로운 4개의 역 개통전에 효율적인 정책도입이 필요하다는 점으로 좋은 평가를 얻을 수 있었습니다. 
<br><br>

## 💡 주제 기획
* 특정한 시간(ex: 출퇴근 시간, 스포츠 경기시간 등)에 특정한 호선을 이용하게 되면 위험할 정도로 사람이 붐비는 밀집현상을 누구나 겪어봤을 것이라는 생각에서 해당 프로젝트의 아이디어를 기획하였습니다.<br><br>
* 기획을 하는 과정에서 지하철 관련 기사를 통해, 2028년 9호선에 추가 신설역 4개가 확장될 것이라는 내용과 9호선은 현재 ‘지옥철’ 혹은 ‘콩나물 시루’같이 별명만 들어도 숨이 막히는 호선으로 지목되고 있다는 내용을 확인하였고, 9호선의 경우 생긴 후 부터 현재까지도 부정적인 여론이 형성되는 호선으로 주목받고 있기 때문에, 이를 통해 프로젝트에서 진행할 주제를 9호선 신설역 수요예측 및 정책 제안으로 확정시켰습니다. 

## 💡 분석 기획
* 교통 도메인의 지식을 이해하고자, 교통 관련 현업에 계신 교통 데이터 분석 멘토님에게 자문을 구했습니다.<br><br>
* 지하철 수요예측 관련 레퍼런스를 참고하며, 지하철 수요예측에 이용될 데이터 수집과, 전처리 기법, EDA 그리고 모델링까지, 해당 프로젝트의 전체적인 흐름 및 아키텍처를 구상하여 팀원들과 소통하였습니다.<br><br>
* 모델의 성능을 올리기 위한 추가적인 데이터수집 및 변수 추가와 적절한 회귀모델 선택 그리고 하이퍼파라미터 튜닝까지, 모델 성능 향상에 대한 내용을 팀원들과 논의하며 프로젝트를 이끌어 나갔습니다.<br><br>

## 🔎 데이터 수집
### 1) 데이터 크롤링
* 서울시 지하철 9호선 신설역 수요인원 예측 모델을 개발하기 위해서 서울시 대학교 인원 정보, 서울시 중,고등학교 인원 정보를 크롤링하여 수집하였습니다.<br>

### 2) 데이터 카운팅
* 서울시 지하철 9호선 신설역 수요인원 예측 모델을 개발하기 위해서 네이버 지도를 활용하여 노선 수, 출입구 수를 카운팅하여 수집하였습니다.<br>

### 3) 데이터 검색
* 서울시 지하철 9호선 신설역 수요인원 예측 모델을 개발하기 위해서 각 호선별 지하철의 량 수를 검색을 통해 수집하였습니다.<br><br>

## 🔎 파생변수 생성
### 1) 지하철 호선별, 역별 승하차 인원 정보
* 휴일이 누적 될 때마다 1일씩 추가하여 '누적휴일'이라는 파생변수를 생성하였습니다.<br>

### 2) 서울시 버스 정류장 공간데이터 정보
* Haversine을 사용해 지하철 역 반경 500m 시설물 개수를 추출하여 '버스정류장 개수'라는 파생변수를 생성하였습니다.<br>

### 3) 우수중소기업 공간데이터 정보
* Haversine을 사용해 지하철 역 반경 500m 시설물 개수를 추출하여 '중소기업 개수'라는 파생변수를 생성하였습니다.<br>

### 4) 서울시 주요시설과 집객시설 공간 데이터 정보
* Haversine을 사용해 지하철 역 반경 500m 시설물 개수를 추출하여 '행정', '교육/보건', '레저/관광/예술', '숙박/음식', '산업', '영화관 개수', '백화점 개수'라는 파생변수들을 생성하였습니다.<br>

### 5) 서울시 주요시설과 집객시설 공간 데이터 정보
* Haversine을 사용해 지하철 역 반경 500m 시설물 개수를 추출하여 '대학생수'라는 파생변수를 생성하였습니다.<br>

### 6) 서울시 주요시설과 집객시설 공간 데이터 정보
* Haversine을 사용해 지하철 역 반경 500m 시설물 개수를 추출하여 '공원 개수'라는 파생변수를 생성하였습니다.<br><br>

## 🔎 데이터 바운더리 
### 1) 최고기온, 최저기온
* 최저 -12도이하, 최고 35도 이상 = 1 / 그 외의 온도 = 0 → '기온'이라는 파생변수를 생성하였습니다.<br>

### 2) 강수량
* 0mm: 정상/ 1-20mm: 약한비 / 21-50mm: 보통비 / 50-mm: 강한비 → '1일 우량'이라는 파생변수를 생성하였습니다.<br>

### 3) month
* 12-2월: 겨울 / 3-5월: 봄 / 6-8월: 여름 / 9-11월: 가을 → '계절'이라는 파생변수를 생성하였습니다.<br><br>

## 📊 EDA(탐색적 데이터 분석)
### 1) 누적 휴일에 따른 총 승객수
* 휴일이 겹칠수록 승하차 수 감소 양상을 보였습니다.<br>

### 2) 한파/폭염 여부에 따른 총 승객수
* 승하차 수가 날씨의 영향을 받는다는 것을 확인할 수 있었습니다.<br>

### 3) 상업지역의 시간대별 승하차수
* 시간대별 특징이 두드러지지 않고, 골고루 유동인구가 분포되어 있었습니다.<br>

### 4) 주거지역의 시간대별 승하차수
* 주거지역에서는 오전에는 승차가, 오후에는 하차가 많은 것을 확인할 수 있었습니다.<br>

### 5) 업무지역의 시간대별 승하차수
* 업무지역에서는 오전에는 하차가, 오후에는 승차가 많은 것을 확인할 수 있었습니다.<br>

### 6) 역 반경 500m에 포함된 시설물
* 역별로 시설물 개수 차이가 확연하게 드러난다는 것을 확인할 수 있었습니다.<br>

### 7) 강수량에 따른 승하차수
* 비가 매우 많이 올 때가 비가 보통으로 오는 날 보다 오히려 승하차 수가 조금 증가한다는 것을 확인할 수 있었습니다.<br>

### 8) 계절에 따른 승하차수
* 방학 시즌에 대학교 역의 승하차수가 확실히 적은 경향이 있다는 것을 확인할 수 있었고, 월드컵 경기장역의 경우 스포츠 폐막 시기인 가을에 승하차수가 기하급수적으로 늘어난다는 것을 확인할 수 있었습니다.<br><br>

## 📄 K-means clustering
* 기계학습에 의한 클러스터링 결과 Group0은 52개의 역, Group1 82개의 역, Group2 37개의 역 결과가 나왔습니다.<br><br> 

* <strong>Group0</strong>은 시간과 관계없이 승하차 분포가 고르기 때문에 상업그룹, <strong>Group1</strong>은 오전에는 승차에, 오후에는 하차에 분포가 되어 있기 때문에 주거그룹, <strong>Group2</strong>는 오전에는 하차에, 오후에는 승차에 분포가 되어 있기 때문에 업무그룹으로 지정하였습니다.<br><br> 

* EDA과정에서 업무지역과 주거지역은 출퇴근 시간에 유동인구가 밀집되어 있다는 근거를 통해, <strong>Group1과 Group2를 통합</strong>하였습니다.<br><br>

* <strong>클러스터링 기법을 통해 최종적으로 Group0(상업 그룹)과 Group1(업무주거 그룹)으로 나누었습니다.</strong><br><br><br>

## 📄 ANOVA검정
* EDA 및 분석을 통해 사용하고자 하는 변수(독립변수)가, 승하차인원 값(종속변수)에  미치는 영향이 <strong>통계적으로 유의한지 확인하기 위해 진행</strong>하였습니다.<br><br><br>

## 📄 변수선정
### 1) 공통변수
* 노선명, 버스정류장 개수, 노선수, 계절, 기온, 공원 개수, 요일, 휴일여부, 누적휴일, 1일우량, 량
### 2) 상업그룹 변수
* 산업, 숙박/음식, 레저/관광/예술, 영화관 개수, 백화점 개수
### 3) 업무주거그룹 변수
* 행정, 대학생 수, 학생 수(중,고등), 교육/보건, 중소기업 개수<br><br>

## 📄 Hold-Out 검정
* <strong>Lidge, Lasso, RandomForest, Xgboost, DecisionTree, lightgbm</strong> 등 여러 회귀분석 모델 선택을 위해 Hold-Out검정을 진행하였습니다.<br><br>
* 그 결과, LGBM모델이 가장 적합한 모델로 선정이 되었으며, <strong>9호선 신설역 수요 예측을 LGBM모델을 이용하여 진행</strong>하기로 하였습니다.<br><br><br>

## 📄 LightGBM
* <strong>LightGBM 모델을 사용하여 승하차수를 예측</strong>하였고, <strong>평균 절대 오차값인 MAE값을 통해 모델의 성능을 검증</strong>하였습니다.<br><br>
* 1차적으로 파라미터 조정 및 k-fold 교차검증을 이용하지 않고, LightGBM 모델의 default값 그대로 초기 예측을 진행한 결과 <strong>상업그룹의 경우 MAE값이 2600명, 업무주거그룹의 경우 MAE값이 2100명</strong> 정도가 나오는 것을 확인할 수 있었습니다.<br><br>
* 2차적으로 하이퍼 파라미터 튜닝을 통해 최적의 파라미터 값을 지정해주었고, 5차 k-fold를 이용하여 노이즈 값을 최소화한 후 예측을 진행한 결과 <strong>상업그룹의 경우 MAE값이 1500명, 업무주거그룹의 경우 MAE값이 990명 정도로 오차 값이 1000~1100명 정도 줄어 성능이 향상</strong>된 것을 확인할 수 있었습니다.<br><br>

## 👍 모델 성능 향상
* 최적의 하이퍼 파라미터 값을 이용하기 위해, <strong>하이퍼파라미터 튜닝</strong>을 진행하였습니다.<br><br>
* 노이즈 값을 없애고자, <strong>K-Fold 교차 검증</strong>을 진행하였습니다.<br><br>

## 📍 9호선 신설역 그룹화
### 1) 업무주거 그룹 : 길동생태공원, 명일공원역, 고덕역
* <strong>길동생태공원</strong>의 경우엔 시점역, 천호대로와 동남부 교차로 및 주변의 공원과 더불어 아파트가 밀집되어 있습니다.<br><br>
* <strong>명일공원역</strong>의 경우엔, 중,고등학교 등 각종 교육시설과 일반 주택 및 아파트가 밀집되어 있습니다.<br><br> 
* <strong>고덕역</strong>의 경우엔, 고등학교, 병원, 아파트 등 각종 교육 시설이 밀집되어 있습니다.<br><br> 
* <strong>따라서 길동생태공원, 명일공원역, 고덕역은 업무주거 그룹에 해당합니다.</strong><br><br>

### 2) 상업그룹 : 샘터공원역
* <strong>샘터공원역</strong>의 경우엔 고덕 강일 공공주택 1지구가 위치해있고, 고덕비즈밸리 중심 상업지역에 위치합니다.<br><br> 
* <strong>따라서 샘터공원역은 상업그룹에 해당합니다.</strong><br><br>

## 🚩 정책 제안
### 1) 대각선 신호등 설치
* 대각선 신호등을 설치하지 않으면 유동인구가 많은 지하철역에서 사람들이 몰리는 현상이 발생할 것입니다. 그러면 공간부족으로 차도에 발을 딛는 사람들이 점점 늘어날 것이고 그들의 안전은 보장할 수 없습니다. 그렇기 때문에 다른 역에 비해 수요승객수가 가장 많은 고덕역의 경우, <strong>사람들이 원활하게 이동할 수 있는 대각선 신호등의 배치를 한다면 교통 및 혼잡한 상황을 예방할 수 있을 것입니다.</strong>

### 2) 급행역 선정
* 승하차 수요는 중요한 고려사항이며 고덕역의 경우 환승노선이 2개인 점과, 예측승객수가 3만 명을 넘는 것을 감안했을 때, <strong>급행역으로 선정이 되는 것이 9호선 내부의 혼잡도를 예방할 수 있는 방안입니다.</strong>

### 3) 도심 공동화 예방
* 도시가 성장하면서 땅값이 오르고, 그로인해 상업 시설들이 다수를 차지하게 됩니다. 상업 시설의 특성상 상주인구는 매우 적은 대신 유동 인구가 많은 편입니다. 결국, 도심의 상주인구는 줄어들게 되는데, 이를 예방하기 위해 <strong>상업그룹에 해당하는 고덕역과 샘터 공원역 주변에 신축되는 고층건물에 대해서는 일정비용을 주거 용도로 하여 직장과 주거지가 이웃하도록 짓는다면, 도심공동화 현상을 예방할 수 있을 것입니다.</strong>

### 4) 8량 추진화
* <strong>9호선의 수요승객이 하루 평균 69만 명에서 약 78만 명으로 늘어난다는 점과, 9호선의 지하 박스 구조물 자체는 8량 길이에 맞추어져 있어 신호, 전기, 승강장, 마감, 조명 등 공사를 진행 할 경우 막대한 예산이 들어간다는 , 9호선 승강장은 최대 8량까지 운행할 수 있도록 설계됐지만 제대로 활용하지 못하고 있다는 점</strong>을 토대로, 위 예측결과는 9호선 8량화 추진에 힘을 실어줄 수 있는 근거로 활용될 수 있습니다.

### 5) 적절한 출입구 입지 선정
* 지하철 이용의 혼잡도 문제는 단순히 지하철 내부의 현상을 넘어서, 외부로까지 이어집니다. 위에 언급한 대각선 신호의 문제와 더불어, <strong>출입구의 적절한 위치 선정은 매우 중요한 사항입니다.</strong>
